{% extends 'base.html' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto glass-card p-8 mt-6">
    <h1 class="text-2xl font-bold mb-6 text-center" style="color:var(--neon-blue);">{{ title }}</h1>

    <form method="post" action="." enctype="multipart/form-data">
        {% csrf_token %}
        
        <div class="space-y-4">
            {% for field in form %}
                {% if field.name == 'category' %}
                    <div>
                        <label class="form-label block text-sm mb-1">{{ field.label }}</label>
                        <!-- Hidden native value kept for server submission -->
                        <input type="hidden" name="{{ field.name }}" id="id_{{ field.name }}" value="{{ field.value }}">

                        <!-- Custom dropdown -->
                        <div class="custom-select" data-target="#id_{{ field.name }}" tabindex="0">
                            <button type="button" class="custom-select-button glass-card" aria-haspopup="listbox" aria-expanded="false">
                                <span class="custom-select-label muted">Select a category</span>
                                <svg class="custom-select-caret" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="#00D4FF" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            </button>

                            <div class="custom-select-panel dropdown-panel" role="listbox" tabindex="-1">
                                {% for category in categories %}
                                    <div class="custom-select-option" data-value="{{ category.id }}" role="option" aria-selected="false">{{ category.name }}</div>
                                {% endfor %}
                            </div>
                        </div>

                        {% if field.errors %}
                            <p class="form-error">{{ field.errors.0 }}</p>
                        {% endif %}
                    </div>
                {% else %}
                    <div>
                        <label class="form-label block text-sm mb-1">{{ field.label }}</label>
                        {{ field }}
                        {% if field.errors %}
                            <p class="form-error">{{ field.errors.0 }}</p>
                        {% endif %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <button type="submit" class="w-full mt-6 btn btn-cta">
            Submit
        </button>
    </form>
</div>
{% endblock %}
